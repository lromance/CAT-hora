<!DOCTYPE html>
<html lang="ca">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rellotge Català - Aprèn les Hores</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    <style>
      body {
        font-family: 'Nunito', sans-serif;
      }
    </style>
  <script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@18.3.1",
    "react-dom/client": "https://esm.sh/react-dom@18.3.1/client",
    "@google/genai": "https://esm.sh/@google/genai@^1.15.0"
  }
}
</script>
<!-- Afegim Babel per traduir TSX a JS al navegador -->
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <!-- 
      Tot el codi de l'aplicació s'ha consolidat aquí per solucionar problemes de càrrega de mòduls a GitHub Pages.
      Això elimina la necessitat de carregar fitxers externs de forma dinàmica, la qual cosa estava fallant.
    -->
    <script type="text/babel" data-presets="react,typescript" data-type="module">
      import React, { useState, useEffect, useCallback } from 'react';
      import ReactDOM from 'react-dom/client';
      import { GoogleGenAI } from "@google/genai";

      // ===== INICI DEL CODI CONSOLIDAT =====

      // --- from types.ts ---
      const View = {
        Explain: 'Explain',
        Learn: 'Learn',
        Practice: 'Practice',
      };

      const ExerciseType = {
        ClockToText: 'ClockToText',
        TextToClock: 'TextToClock',
        MultipleChoice: 'MultipleChoice',
      };

      // --- from utils/timeToCatalan.ts ---
      const numberToCatalan = (n, isHour = false) => {
        const map = {
          1: isHour ? 'una' : 'un',
          2: isHour ? 'dues' : 'dos',
          3: 'tres',
          4: 'quatre',
          5: 'cinc',
          6: 'sis',
          7: 'set',
          8: 'vuit',
          9: 'nou',
          10: 'deu',
          11: 'onze',
          12: 'dotze',
        };
        return map[n] || n.toString();
      };

      const timeToCatalan = (hour, minute) => {
        if (minute < 0 || minute > 59) minute = 0;
        
        const h12 = hour % 12 === 0 ? 12 : hour % 12;
        const nextH12 = (hour + 1) % 12 === 0 ? 12 : (hour + 1) % 12;

        const hText = numberToCatalan(h12, true);
        const nextHText = numberToCatalan(nextH12, true);

        if (minute === 0) {
          if (hour === 0) return "És mitjanit.";
          if (hour === 12) return "És migdia.";
        }
        
        let verb = h12 === 1 ? "És la" : "Són les";

        if (minute === 0) return `${verb} ${hText} en punt.`;

        const quarters = Math.floor(minute / 15);
        const remainder = minute % 15;

        const nextHourArticle = nextH12 === 1 ? 'de la' : 'de les';
        verb = nextH12 === 1 ? "És" : "Són";

        let mainPart = '';

        switch (quarters) {
          case 0: // 0-14
            verb = h12 === 1 ? "És la" : "Són les";
            return `${verb} ${hText} i ${minute === 5 ? 'cinc' : minute === 10 ? 'deu' : `${minute} minuts`}.`;
          case 1: // 15-29
            mainPart = 'un quart';
            break;
          case 2: // 30-44
            mainPart = 'dos quarts';
            break;
          case 3: // 45-59
            mainPart = 'tres quarts';
            break;
        }
        
        if (remainder === 0) {
          return `${verb} ${mainPart} ${nextHourArticle} ${nextHText}.`;
        }

        const remainderText = remainder === 5 ? 'cinc' : remainder === 10 ? 'deu' : `${remainder} minuts`;
        return `${verb} ${mainPart} i ${remainderText} ${nextHourArticle} ${nextHText}.`;
      };

      const formatTwoDigits = (num) => num.toString().padStart(2, '0');

      // --- from translations/translations.ts ---
      const translations = {
        es: {
          mainTitle: "¿Cómo se dice la hora en catalán?",
          mainTitle_ca: "Com es diu l'hora en català?",
          selectLanguage_ca: "Tria un idioma per a la traducció:",
          intro: "El catalán tiene una forma particular y muy arraigada de decir la hora, conocida como el 'sistema de cuartos'. En lugar de contar los minutos que han pasado de la hora actual (como en 'dos y media'), a menudo se hace referencia a la fracción de la hora siguiente que se acerca. ¡Vamos a verlo paso a paso!",
          intro_ca: "El català té una manera particular i molt arrelada de dir l'hora, coneguda com el 'sistema de quarts'. En lloc de comptar els minuts passats de l'hora actual (com en 'dos i mitja'), sovint es fa referència a la fracció de l'hora següent que s'acosta. Anem a veure-ho pas a pas!",
          section1Title: "1. Las Horas en Punto",
          section1Title_ca: "1. Les Hores en Punt",
          section1Intro: "Para la hora exacta, usamos 'en punt'. ¡Cuidado! Para la una, decimos 'És la una', en singular. Para el resto, 'Són les...'.",
          section1Intro_ca: "Per a l'hora exacta, fem servir 'en punt'. Compte! Per a la una, diem 'És la una', en singular. Per a la resta, 'Són les...'.",
          descEnPunt1: "Usamos 'Són les' para cualquier hora que no sea la una.",
          descEnPunt1_ca: "Fem servir 'Són les' per a qualsevol hora que no sigui la una.",
          descEnPunt2: "La una es especial y siempre va en singular con 'És la'.",
          descEnPunt2_ca: "La una és especial i sempre va en singular amb 'És la'.",
          section2Title: "2. El Sistema de Cuartos",
          section2Title_ca: "2. El Sistema de Quarts",
          section2Intro: "¡Esta es la clave! A partir del minuto 15, empezamos a hablar de la hora siguiente. Dividimos la hora en cuatro cuartos de 15 minutos.",
          section2Intro_ca: "Aquesta és la clau! A partir del minut 15, comencem a parlar de l'hora següent. Dividim l'hora en quatre quarts de 15 minuts.",
          descQuarts1: "Han pasado 15 minutos de las dos, así que falta un cuarto para llegar a las tres.",
          descQuarts1_ca: "Han passat 15 minuts de les dues, així que falta un quart per arribar a les tres.",
          descQuarts2: "Han pasado 30 minutos (dos cuartos), por lo tanto, son dos cuartos de tres.",
          descQuarts2_ca: "Han passat 30 minuts (dos quarts), per tant, són dos quarts de tres.",
          descQuarts3: "Han pasado 45 minutos (tres cuartos), y nos estamos acercando a las tres.",
          descQuarts3_ca: "Han passat 45 minuts (tres quarts), i estem apropant-nos a les tres.",
          section3Title: "3. Y Cinco, Y Diez...",
          section3Title_ca: "3. I Cinc, I Deu...",
          section3Intro: "Podemos añadir minutos (normalmente de 5 en 5) a los cuartos que acabamos de ver, siempre haciendo referencia a la hora siguiente.",
          section3Intro_ca: "Podem afegir minuts (normalment de 5 en 5) als quarts que acabem de veure, sempre fent referència a l'hora següent.",
          descMinuts1: "Son las 8 y 15 (un quart de nou) y añadimos cinco minutos más.",
          descMinuts1_ca: "Són les 8 i 15 (un quart de nou) i hi afegim cinc minuts més.",
          descMinuts2: "Son las 8 y 30 (dos quarts de nou) y añadimos diez minutos.",
          descMinuts2_ca: "Són les 8 i 30 (dos quarts de nou) i hi afegim deu minuts.",
          descMinuts3: "Son las 8 y 45 (tres quarts de nou) y sumamos diez minutos más.",
          descMinuts3_ca: "Són les 8 i 45 (tres quarts de nou) i hi sumem deu minuts més.",
          section4Title: "4. Los Primeros Minutos (Hasta el Cuarto)",
          section4Title_ca: "4. Els Primers Minuts (Fins al Quart)",
          section4Intro: "Antes de llegar al primer cuarto (del minuto 1 al 14), el sistema es más sencillo y se refiere a la hora actual.",
          section4Intro_ca: "Abans d'arribar al primer quart (del minut 1 al 14), el sistema és més senzill i es refereix a l'hora actual.",
          descPrimersMinuts: "Aquí simplemente añadimos los minutos a la hora que ya es.",
          descPrimersMinuts_ca: "Aquí simplement afegim els minuts a l'hora que ja és.",
          section5Title: "5. Casos Especiales",
          section5Title_ca: "5. Casos Especials",
          section5Intro: "Finalmente, el mediodía y la medianoche tienen nombres propios.",
          section5Intro_ca: "Finalment, el migdia i la mitjanit tenen noms propis.",
          descEspecials1: "Las 12:00 de la mañana.",
          descEspecials1_ca: "Les 12:00 del matí.",
          descEspecials2: "Las 00:00 de la noche.",
          descEspecials2_ca: "Les 00:00 de la nit.",
        },
        en: {
          mainTitle: "How to tell the time in Catalan?",
          mainTitle_ca: "Com es diu l'hora en català?",
          selectLanguage_ca: "Choose a language for translation:",
          intro: "Catalan has a unique and deeply rooted way of telling time, known as the 'quarter system'. Instead of counting the minutes past the current hour (like 'two-thirty'), it often refers to the fraction of the upcoming next hour. Let's see it step by step!",
          intro_ca: "El català té una manera particular i molt arrelada de dir l'hora, coneguda com el 'sistema de quarts'. En lloc de comptar els minuts passats de l'hora actual (com en 'dos i mitja'), sovint es fa referència a la fracció de l'hora següent que s'acosta. Anem a veure-ho pas a pas!",
          section1Title: "1. On the dot",
          section1Title_ca: "1. Les Hores en Punt",
          section1Intro: "For the exact hour, we use 'en punt'. Be careful! For one o'clock, we say 'És la una', in singular. For the rest, 'Són les...'.",
          section1Intro_ca: "Per a l'hora exacta, fem servir 'en punt'. Compte! Per a la una, diem 'És la una', en singular. Per a la resta, 'Són les...'.",
          descEnPunt1: "We use 'Són les' for any hour other than one o'clock.",
          descEnPunt1_ca: "Fem servir 'Són les' per a qualsevol hora que no sigui la una.",
          descEnPunt2: "One o'clock is special and always uses the singular 'És la'.",
          descEnPunt2_ca: "La una és especial i sempre va en singular amb 'És la'.",
          section2Title: "2. The Quarter System",
          section2Title_ca: "2. El Sistema de Quarts",
          section2Intro: "This is the key! From minute 15 onwards, we start talking about the next hour. We divide the hour into four 15-minute quarters.",
          section2Intro_ca: "Aquesta és la clau! A partir del minut 15, comencem a parlar de l'hora següent. Dividim l'hora en quatre quarts de 15 minuts.",
          descQuarts1: "15 minutes have passed since two, so it's a quarter to three.",
          descQuarts1_ca: "Han passat 15 minuts de les dues, així que falta un quart per arribar a les tres.",
          descQuarts2: "30 minutes (two quarters) have passed, so it's two quarters of three.",
          descQuarts2_ca: "Han passat 30 minuts (dos quarts), per tant, són dos quarts de tres.",
          descQuarts3: "45 minutes (three quarters) have passed, and we are approaching three.",
          descQuarts3_ca: "Han passat 45 minuts (tres quarts), i estem apropant-nos a les tres.",
          section3Title: "3. And Five, And Ten...",
          section3Title_ca: "3. I Cinc, I Deu...",
          section3Intro: "We can add minutes (usually in 5-minute increments) to the quarters we've just seen, always referring to the next hour.",
          section3Intro_ca: "Podem afegir minuts (normalment de 5 en 5) als quarts que acabem de veure, sempre fent referència a l'hora següent.",
          descMinuts1: "It's 8:15 (un quart de nou) and we add five more minutes.",
          descMinuts1_ca: "Són les 8 i 15 (un quart de nou) i hi afegim cinc minuts més.",
          descMinuts2: "It's 8:30 (dos quarts de nou) and we add ten minutes.",
          descMinuts2_ca: "Són les 8 i 30 (dos quarts de nou) i hi afegim deu minuts.",
          descMinuts3: "It's 8:45 (tres quarts de nou) and we add ten more minutes.",
          descMinuts3_ca: "Són les 8 i 45 (tres quarts de nou) i hi sumem deu minuts més.",
          section4Title: "4. The First Minutes (Up to the Quarter)",
          section4Title_ca: "4. Els Primers Minuts (Fins al Quart)",
          section4Intro: "Before reaching the first quarter (from minute 1 to 14), the system is simpler and refers to the current hour.",
          section4Intro_ca: "Abans d'arribar al primer quart (del minut 1 al 14), el sistema és més senzill i es refereix a l'hora actual.",
          descPrimersMinuts: "Here we simply add the minutes to the current hour.",
          descPrimersMinuts_ca: "Aquí simplement afegim els minuts a l'hora que ja és.",
          section5Title: "5. Special Cases",
          section5Title_ca: "5. Casos Especials",
          section5Intro: "Finally, noon and midnight have their own names.",
          section5Intro_ca: "Finalment, el migdia i la mitjanit tenen noms propis.",
          descEspecials1: "12:00 in the morning.",
          descEspecials1_ca: "Les 12:00 del matí.",
          descEspecials2: "00:00 at night.",
          descEspecials2_ca: "Les 00:00 de la nit.",
        },
        fr: {
          mainTitle: "Comment dit-on l'heure en catalan ?",
          mainTitle_ca: "Com es diu l'hora en català?",
          selectLanguage_ca: "Choisissez une langue pour la traduction :",
          intro: "Le catalan a une manière particulière et très ancrée de dire l'heure, connue sous le nom de 'système des quarts'. Au lieu de compter les minutes écoulées après l'heure actuelle (comme dans 'deux heures et demie'), on fait souvent référence à la fraction de l'heure suivante qui approche. Voyons cela pas à pas !",
          intro_ca: "El català té una manera particular i molt arrelada de dir l'hora, coneguda com el 'sistema de quarts'. En lloc de comptar els minuts passats de l'hora actual (com en 'dos i mitja'), sovint es fa referència a la fracció de l'hora següent que s'acosta. Anem a veure-ho pas a pas!",
          section1Title: "1. Les Heures Pile",
          section1Title_ca: "1. Les Hores en Punt",
          section1Intro: "Pour l'heure exacte, on utilise 'en punt'. Attention ! Pour une heure, on dit 'És la una', au singulier. Pour les autres, 'Són les...'.",
          section1Intro_ca: "Per a l'hora exacta, fem servir 'en punt'. Compte! Per a la una, diem 'És la una', en singular. Per a la resta, 'Són les...'.",
          descEnPunt1: "On utilise 'Són les' pour toute heure autre que une heure.",
          descEnPunt1_ca: "Fem servir 'Són les' per a qualsevol hora que no sigui la una.",
          descEnPunt2: "Une heure est spéciale et va toujours au singulier avec 'És la'.",
          descEnPunt2_ca: "La una és especial i sempre va en singular amb 'És la'.",
          section2Title: "2. Le Système des Quarts",
          section2Title_ca: "2. El Sistema de Quarts",
          section2Intro: "C'est la clé ! À partir de la minute 15, on commence à parler de l'heure suivante. On divise l'heure en quatre quarts de 15 minutes.",
          section2Intro_ca: "Aquesta és la clau! A partir del minut 15, comencem a parlar de l'hora següent. Dividim l'hora en quatre quarts de 15 minuts.",
          descQuarts1: "Il s'est écoulé 15 minutes depuis deux heures, il manque donc un quart pour arriver à trois heures.",
          descQuarts1_ca: "Han passat 15 minuts de les dues, així que falta un quart per arribar a les tres.",
          descQuarts2: "Il s'est écoulé 30 minutes (deux quarts), donc ce sont deux quarts de trois heures.",
          descQuarts2_ca: "Han passat 30 minuts (dos quarts), per tant, són dos quarts de tres.",
          descQuarts3: "Il s'est écoulé 45 minutes (trois quarts), et nous approchons de trois heures.",
          descQuarts3_ca: "Han passat 45 minuts (tres quarts), i estem apropant-nos a les tres.",
          section3Title: "3. Et Cinq, Et Dix...",
          section3Title_ca: "3. I Cinc, I Deu...",
          section3Intro: "On peut ajouter des minutes (généralement de 5 en 5) aux quarts que nous venons de voir, toujours en référence à l'heure suivante.",
          section3Intro_ca: "Podem afegir minuts (normalment de 5 en 5) als quarts que acabem de veure, sempre fent referència a l'hora següent.",
          descMinuts1: "Il est 8h15 (un quart de nou) et on ajoute cinq minutes de plus.",
          descMinuts1_ca: "Són les 8 i 15 (un quart de nou) i hi afegim cinc minuts més.",
          descMinuts2: "Il est 8h30 (dos quarts de nou) et on ajoute dix minutes.",
          descMinuts2_ca: "Són les 8 i 30 (dos quarts de nou) i hi afegim deu minuts.",
          descMinuts3: "Il est 8h45 (tres quarts de nou) et on ajoute dix minutes de plus.",
          descMinuts3_ca: "Són les 8 i 45 (tres quarts de nou) i hi sumem deu minuts més.",
          section4Title: "4. Les Premières Minutes (Jusqu'au Quart)",
          section4Title_ca: "4. Els Primers Minuts (Fins al Quart)",
          section4Intro: "Avant d'arriver au premier quart (de la minute 1 à 14), le système est plus simple et se réfère à l'heure actuelle.",
          section4Intro_ca: "Abans d'arribar al primer quart (del minut 1 al 14), el sistema és més senzill i es refereix a l'hora actual.",
          descPrimersMinuts: "Ici, on ajoute simplement les minutes à l'heure qu'il est déjà.",
          descPrimersMinuts_ca: "Aquí simplement afegim els minuts a l'hora que ja és.",
          section5Title: "5. Cas Spéciaux",
          section5Title_ca: "5. Casos Especials",
          section5Intro: "Enfin, midi et minuit ont leurs propres noms.",
          section5Intro_ca: "Finalment, el migdia i la mitjanit tenen noms propis.",
          descEspecials1: "12h00 du matin.",
          descEspecials1_ca: "Les 12:00 del matí.",
          descEspecials2: "00h00 de la nuit.",
          descEspecials2_ca: "Les 00:00 de la nit.",
        },
        hy: {
          mainTitle: "Ինչպե՞ս է ասվում ժամը կատալաներեն",
          mainTitle_ca: "Com es diu l'hora en català?",
          selectLanguage_ca: "Ընտրեք լեզու թարգմանության համար.",
          intro: "Կատալաներենում ժամը ասելու յուրահատուկ և խորը արմատացած ձև կա, որը հայտնի է որպես «քառորդների համակարգ»։ Ընթացիկ ժամից անցած րոպեները հաշվելու փոխարեն (օրինակ՝ «երկուսն անց կես»), հաճախ հղում է կատարվում գալիք հաջորդ ժամի մասնիկին։ Եկեք տեսնենք դա քայլ առ քայլ։",
          intro_ca: "El català té una manera particular i molt arrelada de dir l'hora, coneguda com el 'sistema de quarts'. En lloc de comptar els minuts passats de l'hora actual (com en 'dos i mitja'), sovint es fa referència a la fracció de l'hora següent que s'acosta. Anem a veure-ho pas a pas!",
          section1Title: "1. Ճիշտ ժամերը",
          section1Title_ca: "1. Les Hores en Punt",
          section1Intro: "Ճշգրիտ ժամի համար օգտագործում ենք 'en punt'։ Զգույշ եղեք։ Մեկ ժամի համար ասում ենք 'És la una'՝ եզակի թվով։ Մնացածի համար՝ 'Són les...'։",
          section1Intro_ca: "Per a l'hora exacta, fem servir 'en punt'. Compte! Per a la una, diem 'És la una', en singular. Per a la resta, 'Són les...'.",
          descEnPunt1: "Մենք օգտագործում ենք 'Són les' ցանկացած ժամի համար, բացի մեկից։",
          descEnPunt1_ca: "Fem servir 'Són les' per a qualsevol hora que no sigui la una.",
          descEnPunt2: "Մեկը հատուկ է և միշտ եզակի է 'És la'-ի հետ։",
          descEnPunt2_ca: "La una és especial i sempre va en singular amb 'És la'.",
          section2Title: "2. Քառորդների համակարգը",
          section2Title_ca: "2. El Sistema de Quarts",
          section2Intro: "Սա է բանալին։ 15-րդ րոպեից սկսած մենք սկսում ենք խոսել հաջորդ ժամի մասին։ Ժամը բաժանում ենք չորս 15-րոպեանոց քառորդների։",
          section2Intro_ca: "Aquesta és la clau! A partir del minut 15, comencem a parlar de l'hora següent. Dividim l'hora en quatre quarts de 15 minuts.",
          descQuarts1: "Երկուսից անցել է 15 րոպե, այնպես որ մնացել է մեկ քառորդ, որպեսզի հասնի երեքին։",
          descQuarts1_ca: "Han passat 15 minuts de les dues, així que falta un quart per arribar a les tres.",
          descQuarts2: "Անցել է 30 րոպե (երկու քառորդ), հետևաբար, երեքի երկու քառորդն է։",
          descQuarts2_ca: "Han passat 30 minuts (dos quarts), per tant, són dos quarts de tres.",
          descQuarts3: "Անցել է 45 րոպե (երեք քառորդ), և մենք մոտենում ենք երեքին։",
          descQuarts3_ca: "Han passat 45 minuts (tres quarts), i estem apropant-nos a les tres.",
          section3Title: "3. Եվ հինգ, և տասը...",
          section3Title_ca: "3. I Cinc, I Deu...",
          section3Intro: "Մենք կարող ենք րոպեներ ավելացնել (սովորաբար 5-ական) մեր տեսած քառորդներին՝ միշտ հղում կատարելով հաջորդ ժամին։",
          section3Intro_ca: "Podem afegir minuts (normalment de 5 en 5) als quarts que acabem de veure, sempre fent referència a l'hora següent.",
          descMinuts1: "Ժամը 8:15 է (un quart de nou) և մենք ավելացնում ենք ևս հինգ րոպե։",
          descMinuts1_ca: "Són les 8 i 15 (un quart de nou) i hi afegim cinc minuts més.",
          descMinuts2: "Ժամը 8:30 է (dos quarts de nou) և մենք ավելացնում ենք տասը րոպե։",
          descMinuts2_ca: "Són les 8 i 30 (dos quarts de nou) i hi afegim deu minuts.",
          descMinuts3: "Ժամը 8:45 է (tres quarts de nou) և մենք ավելացնում ենք ևս տասը րոպե։",
          descMinuts3_ca: "Són les 8 i 45 (tres quarts de nou) i hi sumem deu minuts més.",
          section4Title: "4. Առաջին րոպեները (մինչև քառորդը)",
          section4Title_ca: "4. Els Primers Minuts (Fins al Quart)",
          section4Intro: "Նախքան առաջին քառորդին հասնելը (1-ից 14-րդ րոպե), համակարգը ավելի պարզ է և վերաբերում է ընթացիկ ժամին։",
          section4Intro_ca: "Abans d'arribar al primer quart (del minut 1 al 14), el sistema és més senzill i es refereix a l'hora actual.",
          descPrimersMinuts: "Այստեղ մենք պարզապես ավելացնում ենք րոպեները այն ժամին, որն արդեն կա։",
          descPrimersMinuts_ca: "Aquí simplement afegim els minuts a l'hora que ja és.",
          section5Title: "5. Հատուկ դեպքեր",
          section5Title_ca: "5. Casos Especials",
          section5Intro: "Վերջապես, կեսօրը և կեսգիշերը ունեն իրենց սեփական անունները։",
          section5Intro_ca: "Finalment, el migdia i la mitjanit tenen noms propis.",
          descEspecials1: "Առավոտյան 12:00-ն։",
          descEspecials1_ca: "Les 12:00 del matí.",
          descEspecials2: "Գիշերվա 00:00-ն։",
          descEspecials2_ca: "Les 00:00 de la nit.",
        },
        zh: {
          mainTitle: "如何用加泰罗尼亚语说时间？",
          mainTitle_ca: "Com es diu l'hora en català?",
          selectLanguage_ca: "选择翻译语言：",
          intro: "加泰罗尼亚语有一种独特且根深蒂固的报时方式，称为“刻钟系统”。它不是计算当前小时过去的分钟数（如“两点半”），而是经常引用即将到来的下一个小时的分数。让我们一步一步来看！",
          intro_ca: "El català té una manera particular i molt arrelada de dir l'hora, coneguda com el 'sistema de quarts'. En lloc de comptar els minuts passats de l'hora actual (com en 'dos i mitja'), sovint es fa referència a la fracció de l'hora següent que s'acosta. Anem a veure-ho pas a pas!",
          section1Title: "1. 整点",
          section1Title_ca: "1. Les Hores en Punt",
          section1Intro: "对于整点，我们使用 'en punt'。小心！对于一点钟，我们说 'És la una'，用单数形式。对于其他时间，用 'Són les...'。",
          section1Intro_ca: "Per a l'hora exacta, fem servir 'en punt'. Compte! Per a la una, diem 'És la una', en singular. Per a la resta, 'Són les...'.",
          descEnPunt1: "我们对除了一点钟以外的任何小时都使用 'Són les'。",
          descEnPunt1_ca: "Fem servir 'Són les' per a qualsevol hora que no sigui la una.",
          descEnPunt2: "一点钟是特殊的，总是使用单数形式 'És la'。",
          descEnPunt2_ca: "La una és especial i sempre va en singular amb 'És la'.",
          section2Title: "2. 刻钟系统",
          section2Title_ca: "2. El Sistema de Quarts",
          section2Intro: "这是关键！从第15分钟开始，我们开始谈论下一个小时。我们将一小时分为四个15分钟的刻钟。",
          section2Intro_ca: "Aquesta és la clau! A partir del minut 15, comencem a parlar de l'hora següent. Dividim l'hora en quatre quarts de 15 minuts.",
          descQuarts1: "两点钟已经过去了15分钟，所以还差一刻钟到三点。",
          descQuarts1_ca: "Han passat 15 minuts de les dues, així que falta un quart per arribar a les tres.",
          descQuarts2: "已经过去了30分钟（两刻钟），所以是三点的两刻钟。",
          descQuarts2_ca: "Han passat 30 minuts (dos quarts), per tant, són dos quarts de tres.",
          descQuarts3: "已经过去了45分钟（三刻钟），我们正在接近三点。",
          descQuarts3_ca: "Han passat 45 minuts (tres quarts), i estem apropant-nos a les tres.",
          section3Title: "3. ...加五分，...加十分",
          section3Title_ca: "3. I Cinc, I Deu...",
          section3Intro: "我们可以在我们刚看到的刻钟上添加分钟（通常以5分钟为增量），总是参考下一个小时。",
          section3Intro_ca: "Podem afegir minuts (normalment de 5 en 5) als quarts que acabem de veure, sempre fent referència a l'hora següent.",
          descMinuts1: "现在是8点15分（un quart de nou），我们再加五分钟。",
          descMinuts1_ca: "Són les 8 i 15 (un quart de nou) i hi afegim cinc minuts més.",
          descMinuts2: "现在是8点30分（dos quarts de nou），我们再加十分钟。",
          descMinuts2_ca: "Són les 8 i 30 (dos quarts de nou) i hi afegim deu minuts.",
          descMinuts3: "现在是8点45分（tres quarts de nou），我们再加十分钟。",
          descMinuts3_ca: "Són les 8 i 45 (tres quarts de nou) i hi sumem deu minuts més.",
          section4Title: "4. 最初的几分钟（直到一刻钟）",
          section4Title_ca: "4. Els Primers Minuts (Fins al Quart)",
          section4Intro: "在到达第一个刻钟之前（从第1分钟到第14分钟），系统更简单，指的是当前的小时。",
          section4Intro_ca: "Abans d'arribar al primer quart (del minut 1 al 14), el sistema és més senzill i es refereix a l'hora actual.",
          descPrimersMinuts: "在这里，我们只是将分钟数加到当前的小时上。",
          descPrimersMinuts_ca: "Aquí simplement afegim els minuts a l'hora que ja és.",
          section5Title: "5. 特殊情况",
          section5Title_ca: "5. Casos Especials",
          section5Intro: "最后，中午和午夜有它们自己的名称。",
          section5Intro_ca: "Finalment, el migdia i la mitjanit tenen noms propis.",
          descEspecials1: "早上12:00。",
          descEspecials1_ca: "Les 12:00 del matí.",
          descEspecials2: "晚上00:00。",
          descEspecials2_ca: "Les 00:00 de la nit.",
        },
        ka: {
          mainTitle: "როგორ ვთქვათ დრო კატალონიურად?",
          mainTitle_ca: "Com es diu l'hora en català?",
          selectLanguage_ca: "აირჩიეთ ენა თარგმანისთვის:",
          intro: "კატალონიურს აქვს დროის თქმის უნიკალური და ღრმად ფესვგადგმული ხერხი, რომელიც ცნობილია როგორც 'მეოთხედების სისტემა'. მიმდინარე საათიდან გასული წუთების დათვლის ნაცვლად (მაგალითად, 'ორნახევარი'), ის ხშირად მიუთითებს მომავალი შემდეგი საათის ნაწილზე. ვნახოთ ეს ეტაპობრივად!",
          intro_ca: "El català té una manera particular i molt arrelada de dir l'hora, coneguda com el 'sistema de quarts'. En lloc de comptar els minuts passats de l'hora actual (com en 'dos i mitja'), sovint es fa referència a la fracció de l'hora següent que s'acosta. Anem a veure-ho pas a pas!",
          section1Title: "1. ზუსტი საათები",
          section1Title_ca: "1. Les Hores en Punt",
          section1Intro: "ზუსტი საათისთვის ვიყენებთ 'en punt'. ფრთხილად! პირველი საათისთვის ვამბობთ 'És la una', მხოლობით რიცხვში. დანარჩენისთვის, 'Són les...'.",
          section1Intro_ca: "Per a l'hora exacta, fem servir 'en punt'. Compte! Per a la una, diem 'És la una', en singular. Per a la resta, 'Són les...'.",
          descEnPunt1: "ჩვენ ვიყენებთ 'Són les' ნებისმიერი საათისთვის, გარდა პირველისა.",
          descEnPunt1_ca: "Fem servir 'Són les' per a qualsevol hora que no sigui la una.",
          descEnPunt2: "პირველი საათი განსაკუთრებულია და ყოველთვის გამოიყენება მხოლობით რიცხვში 'És la'-სთან ერთად.",
          descEnPunt2_ca: "La una és especial i sempre va en singular amb 'És la'.",
          section2Title: "2. მეოთხედების სისტემა",
          section2Title_ca: "2. El Sistema de Quarts",
          section2Intro: "ეს არის გასაღები! მე-15 წუთიდან ვიწყებთ საუბარს შემდეგ საათზე. ჩვენ საათს ვყოფთ ოთხ 15-წუთიან მეოთხედად.",
          section2Intro_ca: "Aquesta és la clau! A partir del minut 15, comencem a parlar de l'hora següent. Dividim l'hora en quatre quarts de 15 minuts.",
          descQuarts1: "ორი საათიდან 15 წუთი გავიდა, ასე რომ სამ საათამდე ერთი მეოთხედი აკლია.",
          descQuarts1_ca: "Han passat 15 minuts de les dues, així que falta un quart per arribar a les tres.",
          descQuarts2: "გავიდა 30 წუთი (ორი მეოთხედი), ასე რომ, ეს არის სამის ორი მეოთხედი.",
          descQuarts2_ca: "Han passat 30 minuts (dos quarts), per tant, són dos quarts de tres.",
          descQuarts3: "გავიდა 45 წუთი (სამი მეოთხედი), და ჩვენ ვუახლოვდებით სამ საათს.",
          descQuarts3_ca: "Han passat 45 minuts (tres quarts), i estem apropant-nos a les tres.",
          section3Title: "3. და ხუთი, და ათი...",
          section3Title_ca: "3. I Cinc, I Deu...",
          section3Intro: "ჩვენ შეგვიძლია დავამატოთ წუთები (ჩვეულებრივ, 5-წუთიანი ნაბიჯებით) ჩვენს მიერ ნანახ მეოთხედებს, ყოველთვის შემდეგ საათზე მითითებით.",
          section3Intro_ca: "Podem afegir minuts (normalment de 5 en 5) als quarts que acabem de veure, sempre fent referència a l'hora següent.",
          descMinuts1: "8:15 საათია (un quart de nou) და ჩვენ ვამატებთ კიდევ ხუთ წუთს.",
          descMinuts1_ca: "Són les 8 i 15 (un quart de nou) i hi afegim cinc minuts més.",
          descMinuts2: "8:30 საათია (dos quarts de nou) და ჩვენ ვამატებთ ათ წუთს.",
          descMinuts2_ca: "Són les 8 i 30 (dos quarts de nou) i hi afegim deu minuts.",
          descMinuts3: "8:45 საათია (tres quarts de nou) და ჩვენ ვამატებთ კიდევ ათ წუთს.",
          descMinuts3_ca: "Són les 8 i 45 (tres quarts de nou) i hi sumem deu minuts més.",
          section4Title: "4. პირველი წუთები (მეოთხედამდე)",
          section4Title_ca: "4. Els Primers Minuts (Fins al Quart)",
          section4Intro: "პირველ მეოთხედამდე (1-დან 14 წუთამდე), სისტემა უფრო მარტივია და ეხება მიმდინარე საათს.",
          section4Intro_ca: "Abans d'arribar al primer quart (del minut 1 al 14), el sistema és més senzill i es refereix a l'hora actual.",
          descPrimersMinuts: "აქ ჩვენ უბრალოდ ვამატებთ წუთებს მიმდინარე საათს.",
          descPrimersMinuts_ca: "Aquí simplement afegim els minuts a l'hora que ja és.",
          section5Title: "5. განსაკუთრებული შემთხვევები",
          section5Title_ca: "5. Casos Especials",
          section5Intro: "საბოლოოდ, შუადღეს და შუაღამეს თავიანთი სახელები აქვთ.",
          section5Intro_ca: "Finalment, el migdia i la mitjanit tenen noms propis.",
          descEspecials1: "დილის 12:00 საათი.",
          descEspecials1_ca: "Les 12:00 del matí.",
          descEspecials2: "ღამის 00:00 საათი.",
          descEspecials2_ca: "Les 00:00 de la nit.",
        },
        hi: {
          mainTitle: "कातालान में समय कैसे बताते हैं?",
          mainTitle_ca: "Com es diu l'hora en català?",
          selectLanguage_ca: "अनुवाद के लिए एक भाषा चुनें:",
          intro: "कातालान में समय बताने का एक अनोखा और गहरा तरीका है, जिसे 'चौथाई प्रणाली' (sistema de quarts) कहा जाता है। वर्तमान घंटे के बीते हुए मिनटों को गिनने के बजाय (जैसे 'ढाई बजे'), यह अक्सर आने वाले अगले घंटे के हिस्से का उल्लेख करता है। चलिए इसे कदम-दर-कदम देखते हैं!",
          intro_ca: "El català té una manera particular i molt arrelada de dir l'hora, coneguda com el 'sistema de quarts'. En lloc de comptar els minuts passats de l'hora actual (com en 'dos i mitja'), sovint es fa referència a la fracció de l'hora següent que s'acosta. Anem a veure-ho pas a pas!",
          section1Title: "1. पूरे बजे",
          section1Title_ca: "1. Les Hores en Punt",
          section1Intro: "पूरे घंटे के लिए, हम 'en punt' का उपयोग करते हैं। सावधान! एक बजे के लिए, हम एकवचन में 'És la una' कहते हैं। बाकी के लिए, 'Són les...'।",
          section1Intro_ca: "Per a l'hora exacta, fem servir 'en punt'. Compte! Per a la una, diem 'És la una', en singular. Per a la resta, 'Són les...'.",
          descEnPunt1: "हम एक बजे को छोड़कर किसी भी घंटे के लिए 'Són les' का उपयोग करते हैं।",
          descEnPunt1_ca: "Fem servir 'Són les' per a qualsevol hora que no sigui la una.",
          descEnPunt2: "एक बजे विशेष है और हमेशा 'És la' के साथ एकवचन में आता है।",
          descEnPunt2_ca: "La una és especial i sempre va en singular amb 'És la'.",
          section2Title: "2. चौथाई प्रणाली",
          section2Title_ca: "2. El Sistema de Quarts",
          section2Intro: "यही कुंजी है! मिनट 15 से, हम अगले घंटे के बारे में बात करना शुरू करते हैं। हम घंटे को चार 15 मिनट की चौथाई में विभाजित करते हैं।",
          section2Intro_ca: "Aquesta és la clau! A partir del minut 15, comencem a parlar de l'hora següent. Dividim l'hora en quatre quarts de 15 minuts.",
          descQuarts1: "दो बजकर 15 मिनट हो गए हैं, इसलिए तीन बजने में एक चौथाई बाकी है।",
          descQuarts1_ca: "Han passat 15 minuts de les dues, així que falta un quart per arribar a les tres.",
          descQuarts2: "30 मिनट (दो चौथाई) बीत चुके हैं, इसलिए यह तीन की दो चौथाई है।",
          descQuarts2_ca: "Han passat 30 minuts (dos quarts), per tant, són dos quarts de tres.",
          descQuarts3: "45 मिनट (तीन चौथाई) बीत चुके हैं, और हम तीन बजे के करीब पहुंच रहे हैं।",
          descQuarts3_ca: "Han passat 45 minuts (tres quarts), i estem apropant-nos a les tres.",
          section3Title: "3. और पाँच, और दस...",
          section3Title_ca: "3. I Cinc, I Deu...",
          section3Intro: "हम अभी देखी गई चौथाई में मिनट जोड़ सकते हैं (आमतौर पर 5 के गुणकों में), हमेशा अगले घंटे का जिक्र करते हुए।",
          section3Intro_ca: "Podem afegir minuts (normalment de 5 en 5) als quarts que acabem de veure, sempre fent referència a l'hora següent.",
          descMinuts1: "यह 8:15 (un quart de nou) है और हम पाँच और मिनट जोड़ते हैं।",
          descMinuts1_ca: "Són les 8 i 15 (un quart de nou) i hi afegim cinc minuts més.",
          descMinuts2: "यह 8:30 (dos quarts de nou) है और हम दस मिनट जोड़ते हैं।",
          descMinuts2_ca: "Són les 8 i 30 (dos quarts de nou) i hi afegim deu minuts.",
          descMinuts3: "यह 8:45 (tres quarts de nou) है और हम दस और मिनट जोड़ते हैं।",
          descMinuts3_ca: "Són les 8 i 45 (tres quarts de nou) i hi sumem deu minuts més.",
          section4Title: "4. पहले कुछ मिनट (चौथाई तक)",
          section4Title_ca: "4. Els Primers Minuts (Fins al Quart)",
          section4Intro: "पहली चौथाई तक पहुंचने से पहले (मिनट 1 से 14 तक), प्रणाली सरल है और वर्तमान घंटे को संदर्भित करती है।",
          section4Intro_ca: "Abans d'arribar al primer quart (del minut 1 al 14), el sistema és més senzill i es refereix a l'hora actual.",
          descPrimersMinuts: "यहाँ हम बस वर्तमान घंटे में मिनट जोड़ते हैं।",
          descPrimersMinuts_ca: "Aquí simplement afegim els minuts a l'hora que ja és.",
          section5Title: "5. विशेष मामले",
          section5Title_ca: "5. Casos Especials",
          section5Intro: "अंत में, दोपहर और आधी रात के अपने नाम हैं।",
          section5Intro_ca: "Finalment, el migdia i la mitjanit tenen noms propis.",
          descEspecials1: "सुबह के 12:00 बजे।",
          descEspecials1_ca: "Les 12:00 del matí.",
          descEspecials2: "रात के 00:00 बजे।",
          descEspecials2_ca: "Les 00:00 de la nit.",
        },
        ne: {
          mainTitle: "क्याटालानमा समय कसरी भन्ने?",
          mainTitle_ca: "Com es diu l'hora en català?",
          selectLanguage_ca: "अनुवादको लागि भाषा छान्नुहोस्:",
          intro: "क्याटालानमा समय भन्नको लागि एउटा विशेष र गहिरो जरा गाडेको तरिका छ, जसलाई 'चौथाई प्रणाली' (sistema de quarts) भनिन्छ। हालको घण्टा बितेका मिनेटहरू गन्नुको सट्टा (जस्तै 'साढे दुई'), यसले अक्सर आउँदै गरेको अर्को घण्टाको अंशलाई जनाउँछ। यसलाई चरण-चरणमा हेरौं!",
          intro_ca: "El català té una manera particular i molt arrelada de dir l'hora, coneguda com el 'sistema de quarts'. En lloc de comptar els minuts passats de l'hora actual (com en 'dos i mitja'), sovint es fa referència a la fracció de l'hora següent que s'acosta. Anem a veure-ho pas a pas!",
          section1Title: "१. ठ्याक्कै बजे",
          section1Title_ca: "1. Les Hores en Punt",
          section1Intro: "ठ्याक्कै घण्टाको लागि, हामी 'en punt' प्रयोग गर्छौं। होसियार! एक बजेको लागि, हामी एकवचनमा 'És la una' भन्छौं। बाँकीको लागि, 'Són les...'।",
          section1Intro_ca: "Per a l'hora exacta, fem servir 'en punt'. Compte! Per a la una, diem 'És la una', en singular. Per a la resta, 'Són les...'.",
          descEnPunt1: "हामी एक बजे बाहेक कुनै पनि घण्टाको लागि 'Són les' प्रयोग गर्छौं।",
          descEnPunt1_ca: "Fem servir 'Són les' per a qualsevol hora que no sigui la una.",
          descEnPunt2: "एक बजे विशेष छ र सधैं 'És la' सँग एकवचनमा आउँछ।",
          descEnPunt2_ca: "La una és especial i sempre va en singular amb 'És la'.",
          section2Title: "२. चौथाई प्रणाली",
          section2Title_ca: "2. El Sistema de Quarts",
          section2Intro: "यो नै मुख्य कुरा हो! १५ मिनेटपछि, हामी अर्को घण्टाको बारेमा कुरा गर्न थाल्छौं। हामी घण्टालाई चार १५-मिनेटको चौथाईमा विभाजन गर्छौं।",
          section2Intro_ca: "Aquesta és la clau! A partir del minut 15, comencem a parlar de l'hora següent. Dividim l'hora en quatre quarts de 15 minuts.",
          descQuarts1: "दुई बजेर १५ मिनेट गयो, त्यसैले तीन बज्न एक चौथाई बाँकी छ।",
          descQuarts1_ca: "Han passat 15 minuts de les dues, així que falta un quart per arribar a les tres.",
          descQuarts2: "३० मिनेट (दुई चौथाई) बितिसक्यो, त्यसैले यो तीनको दुई चौथाई हो।",
          descQuarts2_ca: "Han passat 30 minuts (dos quarts), per tant, són dos quarts de tres.",
          descQuarts3: "४५ मिनेट (तीन चौथाई) बितिसक्यो, र हामी तीन बजेको नजिक पुग्दैछौं।",
          descQuarts3_ca: "Han passat 45 minuts (tres quarts), i estem apropant-nos a les tres.",
          section3Title: "३. र पाँच, र दश...",
          section3Title_ca: "3. I Cinc, I Deu...",
          section3Intro: "हामीले भर्खरै हेरेका चौथाईहरूमा मिनेटहरू थप्न सक्छौं (सामान्यतया ५-५ को अन्तरालमा), सधैं अर्को घण्टालाई जनाउँदै।",
          section3Intro_ca: "Podem afegir minuts (normalment de 5 en 5) als quarts que acabem de veure, sempre fent referència a l'hora següent.",
          descMinuts1: "यो ८:१५ (un quart de nou) हो र हामी थप पाँच मिनेट थप्छौं।",
          descMinuts1_ca: "Són les 8 i 15 (un quart de nou) i hi afegim cinc minuts més.",
          descMinuts2: "यो ८:३० (dos quarts de nou) हो र हामी दश मिनेट थप्छौं।",
          descMinuts2_ca: "Són les 8 i 30 (dos quarts de nou) i hi afegim deu minuts.",
          descMinuts3: "यो ८:४५ (tres quarts de nou) हो र हामी थप दश मिनेट थप्छौं।",
          descMinuts3_ca: "Són les 8 i 45 (tres quarts de nou) i hi sumem deu minuts més.",
          section4Title: "४. पहिलो केही मिनेट (चौथाईसम्म)",
          section4Title_ca: "4. Els Primers Minuts (Fins al Quart)",
          section4Intro: "पहिलो चौथाईमा पुग्नु अघि (१ देखि १४ मिनेटसम्म), प्रणाली सरल छ र हालको घण्टालाई जनाउँछ।",
          section4Intro_ca: "Abans d'arribar al primer quart (del minut 1 al 14), el sistema és més senzill i es refereix a l'hora actual.",
          descPrimersMinuts: "यहाँ हामी केवल हालको घण्टामा मिनेटहरू थप्छौं।",
          descPrimersMinuts_ca: "Aquí simplement afegim els minuts a l'hora que ja és.",
          section5Title: "५. विशेष अवस्थाहरू",
          section5Title_ca: "5. Casos Especials",
          section5Intro: "अन्तमा, मध्यान्ह र मध्यरातका आफ्नै नामहरू छन्।",
          section5Intro_ca: "Finalment, el migdia i la mitjanit tenen noms propis.",
          descEspecials1: "बिहानको १२:०० बजे।",
          descEspecials1_ca: "Les 12:00 del matí.",
          descEspecials2: "रातको ००:०० बजे।",
          descEspecials2_ca: "Les 00:00 de la nit.",
        },
        ru: {
          mainTitle: "Как сказать время на каталанском?",
          mainTitle_ca: "Com es diu l'hora en català?",
          selectLanguage_ca: "Выберите язык для перевода:",
          intro: "В каталанском языке существует уникальный и глубоко укоренившийся способ называть время, известный как «система четвертей». Вместо того чтобы считать минуты, прошедшие после текущего часа (как в «половина третьего»), часто делается ссылка на долю приближающегося следующего часа. Давайте рассмотрим это шаг за шагом!",
          intro_ca: "El català té una manera particular i molt arrelada de dir l'hora, coneguda com el 'sistema de quarts'. En lloc de comptar els minuts passats de l'hora actual (com en 'dos i mitja'), sovint es fa referència a la fracció de l'hora següent que s'acosta. Anem a veure-ho pas a pas!",
          section1Title: "1. Ровные часы",
          section1Title_ca: "1. Les Hores en Punt",
          section1Intro: "Для точного часа мы используем 'en punt'. Осторожно! Для часа дня мы говорим 'És la una', в единственном числе. Для остальных — 'Són les...'.",
          section1Intro_ca: "Per a l'hora exacta, fem servir 'en punt'. Compte! Per a la una, diem 'És la una', en singular. Per a la resta, 'Són les...'.",
          descEnPunt1: "Мы используем 'Són les' для любого часа, кроме часа дня.",
          descEnPunt1_ca: "Fem servir 'Són les' per a qualsevol hora que no sigui la una.",
          descEnPunt2: "Час дня — особенный и всегда используется в единственном числе с 'És la'.",
          descEnPunt2_ca: "La una és especial i sempre va en singular amb 'És la'.",
          section2Title: "2. Система четвертей",
          section2Title_ca: "2. El Sistema de Quarts",
          section2Intro: "Это ключ! Начиная с 15-й минуты, мы начинаем говорить о следующем часе. Мы делим час на четыре 15-минутные четверти.",
          section2Intro_ca: "Aquesta és la clau! A partir del minut 15, comencem a parlar de l'hora següent. Dividim l'hora en quatre quarts de 15 minuts.",
          descQuarts1: "Прошло 15 минут после двух, так что осталась одна четверть до трех.",
          descQuarts1_ca: "Han passat 15 minuts de les dues, així que falta un quart per arribar a les tres.",
          descQuarts2: "Прошло 30 минут (две четверти), следовательно, это две четверти третьего.",
          descQuarts2_ca: "Han passat 30 minuts (dos quarts), per tant, són dos quarts de tres.",
          descQuarts3: "Прошло 45 минут (три четверти), и мы приближаемся к трем часам.",
          descQuarts3_ca: "Han passat 45 minuts (tres quarts), i estem apropant-nos a les tres.",
          section3Title: "3. И пять, и десять...",
          section3Title_ca: "3. I Cinc, I Deu...",
          section3Intro: "Мы можем добавлять минуты (обычно с шагом в 5) к только что рассмотренным четвертям, всегда ссылаясь на следующий час.",
          section3Intro_ca: "Podem afegir minuts (normalment de 5 en 5) als quarts que acabem de veure, sempre fent referència a l'hora següent.",
          descMinuts1: "Сейчас 8:15 (un quart de nou), и мы добавляем еще пять минут.",
          descMinuts1_ca: "Són les 8 i 15 (un quart de nou) i hi afegim cinc minuts més.",
          descMinuts2: "Сейчас 8:30 (dos quarts de nou), и мы добавляем десять минут.",
          descMinuts2_ca: "Són les 8 i 30 (dos quarts de nou) i hi afegim deu minuts.",
          descMinuts3: "Сейчас 8:45 (tres quarts de nou), и мы добавляем еще десять минут.",
          descMinuts3_ca: "Són les 8 i 45 (tres quarts de nou) i hi sumem deu minuts més.",
          section4Title: "4. Первые минуты (до четверти)",
          section4Title_ca: "4. Els Primers Minuts (Fins al Quart)",
          section4Intro: "До первой четверти (с 1 по 14 минуту) система проще и относится к текущему часу.",
          section4Intro_ca: "Abans d'arribar al primer quart (del minut 1 al 14), el sistema és més senzill i es refereix a l'hora actual.",
          descPrimersMinuts: "Здесь мы просто добавляем минуты к текущему часу.",
          descPrimersMinuts_ca: "Aquí simplement afegim els minuts a l'hora que ja és.",
          section5Title: "5. Особые случаи",
          section5Title_ca: "5. Casos Especials",
          section5Intro: "Наконец, полдень и полночь имеют свои собственные названия.",
          section5Intro_ca: "Finalment, el migdia i la mitjanit tenen noms propis.",
          descEspecials1: "12:00 утра.",
          descEspecials1_ca: "Les 12:00 del matí.",
          descEspecials2: "00:00 ночи.",
          descEspecials2_ca: "Les 00:00 de la nit.",
        },
        uk: {
          mainTitle: "Як сказати час каталанською?",
          mainTitle_ca: "Com es diu l'hora en català?",
          selectLanguage_ca: "Оберіть мову для перекладу:",
          intro: "У каталанській мові існує унікальний і глибоко вкорінений спосіб називати час, відомий як «система чвертей». Замість того, щоб рахувати хвилини, що минули після поточної години (як у «пів на третю»), часто робиться посилання на частку наступної години, що наближається. Давайте розглянемо це крок за кроком!",
          intro_ca: "El català té una manera particular i molt arrelada de dir l'hora, coneguda com el 'sistema de quarts'. En lloc de comptar els minuts passats de l'hora actual (com en 'dos i mitja'), sovint es fa referència a la fracció de l'hora següent que s'acosta. Anem a veure-ho pas a pas!",
          section1Title: "1. Рівні години",
          section1Title_ca: "1. Les Hores en Punt",
          section1Intro: "Для точної години ми використовуємо 'en punt'. Обережно! Для першої години ми кажемо 'És la una', в однині. Для решти — 'Són les...'.",
          section1Intro_ca: "Per a l'hora exacta, fem servir 'en punt'. Compte! Per a la una, diem 'És la una', en singular. Per a la resta, 'Són les...'.",
          descEnPunt1: "Ми використовуємо 'Són les' для будь-якої години, крім першої.",
          descEnPunt1_ca: "Fem servir 'Són les' per a qualsevol hora que no sigui la una.",
          descEnPunt2: "Перша година є особливою і завжди вживається в однині з 'És la'.",
          descEnPunt2_ca: "La una és especial i sempre va en singular amb 'És la'.",
          section2Title: "2. Система чвертей",
          section2Title_ca: "2. El Sistema de Quarts",
          section2Intro: "Це ключ! Починаючи з 15-ї хвилини, ми починаємо говорити про наступну годину. Ми ділимо годину на чотири 15-хвилинні чверті.",
          section2Intro_ca: "Aquesta és la clau! A partir del minut 15, comencem a parlar de l'hora següent. Dividim l'hora en quatre quarts de 15 minuts.",
          descQuarts1: "Минуло 15 хвилин після другої, отже, залишилася одна чверть до третьої.",
          descQuarts1_ca: "Han passat 15 minuts de les dues, així que falta un quart per arribar a les tres.",
          descQuarts2: "Минуло 30 хвилин (дві чверті), отже, це дві чверті на третю.",
          descQuarts2_ca: "Han passat 30 minuts (dos quarts), per tant, són dos quarts de tres.",
          descQuarts3: "Минуло 45 хвилин (три чверті), і ми наближаємося до третьої години.",
          descQuarts3_ca: "Han passat 45 minuts (tres quarts), i estem apropant-nos a les tres.",
          section3Title: "3. І п'ять, і десять...",
          section3Title_ca: "3. I Cinc, I Deu...",
          section3Intro: "Ми можемо додавати хвилини (зазвичай з кроком у 5) до щойно розглянутих чвертей, завжди посилаючись на наступну годину.",
          section3Intro_ca: "Podem afegir minuts (normalment de 5 en 5) als quarts que acabem de veure, sempre fent referència a l'hora següent.",
          descMinuts1: "Зараз 8:15 (un quart de nou), і ми додаємо ще п'ять хвилин.",
          descMinuts1_ca: "Són les 8 i 15 (un quart de nou) i hi afegim cinc minuts més.",
          descMinuts2: "Зараз 8:30 (dos quarts de nou), і ми додаємо десять хвилин.",
          descMinuts2_ca: "Són les 8 i 30 (dos quarts de nou) i hi afegim deu minuts.",
          descMinuts3: "Зараз 8:45 (tres quarts de nou), і ми додаємо ще десять хвилин.",
          descMinuts3_ca: "Són les 8 i 45 (tres quarts de nou) i hi sumem deu minuts més.",
          section4Title: "4. Перші хвилини (до чверті)",
          section4Title_ca: "4. Els Primers Minuts (Fins al Quart)",
          section4Intro: "До першої чверті (з 1 до 14 хвилини) система простіша і стосується поточної години.",
          section4Intro_ca: "Abans d'arribar al primer quart (del minut 1 al 14), el sistema és més senzill i es refereix a l'hora actual.",
          descPrimersMinuts: "Тут ми просто додаємо хвилини до поточної години.",
          descPrimersMinuts_ca: "Aquí simplement afegim els minuts a l'hora que ja és.",
          section5Title: "5. Особливі випадки",
          section5Title_ca: "5. Casos Especials",
          section5Intro: "Нарешті, полудень і північ мають свої власні назви.",
          section5Intro_ca: "Finalment, el migdia i la mitjanit tenen noms propis.",
          descEspecials1: "12:00 ранку.",
          descEspecials1_ca: "Les 12:00 del matí.",
          descEspecials2: "00:00 ночі.",
          descEspecials2_ca: "Les 00:00 de la nit.",
        },
        ur: {
          mainTitle: "کاتالان میں وقت کیسے بتایا جاتا ہے؟",
          mainTitle_ca: "Com es diu l'hora en català?",
          selectLanguage_ca: "ترجمے کے لیے زبان منتخب کریں:",
          intro: "کاتالان میں وقت بتانے کا ایک منفرد اور گہرا طریقہ ہے، جسے 'چوتھائی نظام' (sistema de quarts) کہا جاتا ہے۔ موجودہ گھنٹے کے گزرے ہوئے منٹوں کو گننے کے بجائے (جیسے 'ڈھائی بجے')، یہ اکثر آنے والے अगले گھنٹے کے حصے کا حوالہ دیتا ہے۔ آئیے اسے قدم بہ قدم دیکھتے ہیں!",
          intro_ca: "El català té una manera particular i molt arrelada de dir l'hora, coneguda com el 'sistema de quarts'. En lloc de comptar els minuts passats de l'hora actual (com en 'dos i mitja'), sovint es fa referència a la fracció de l'hora següent que s'acosta. Anem a veure-ho pas a pas!",
          section1Title: "۱. پورے بجے",
          section1Title_ca: "1. Les Hores en Punt",
          section1Intro: "پورے گھنٹے کے لیے، ہم 'en punt' استعمال کرتے ہیں۔ ہوشیار! ایک بجے کے لیے، ہم واحد میں 'És la una' کہتے ہیں۔ باقی کے لیے، 'Són les...'۔",
          section1Intro_ca: "Per a l'hora exacta, fem servir 'en punt'. Compte! Per a la una, diem 'És la una', en singular. Per a la resta, 'Són les...'.",
          descEnPunt1: "ہم ایک بجے کے علاوہ کسی بھی گھنٹے کے لیے 'Són les' استعمال کرتے ہیں۔",
          descEnPunt1_ca: "Fem servir 'Són les' per a qualsevol hora que no sigui la una.",
          descEnPunt2: "ایک بجے خاص ہے اور ہمیشہ 'És la' کے ساتھ واحد میں آتا ہے۔",
          descEnPunt2_ca: "La una és especial i sempre va en singular amb 'És la'.",
          section2Title: "۲. چوتھائی نظام",
          section2Title_ca: "2. El Sistema de Quarts",
          section2Intro: "یہی کلید ہے! منٹ 15 سے، ہم अगले گھنٹے کے بارے में بات کرنا شروع کرتے ہیں۔ ہم گھنٹے کو چار 15 منٹ کی چوتھائیوں میں تقسیم کرتے ہیں۔",
          section2Intro_ca: "Aquesta és la clau! A partir del minut 15, comencem a parlar de l'hora següent. Dividim l'hora en quatre quarts de 15 minuts.",
          descQuarts1: "دو بج کر 15 منٹ ہو چکے ہیں، اس لیے تین بجنے میں ایک چوتھائی باقی ہے۔",
          descQuarts1_ca: "Han passat 15 minuts de les dues, així que falta un quart per arribar a les tres.",
          descQuarts2: "30 منٹ (دو چوتھائیاں) گزر چکے ہیں، اس لیے یہ تین کی دو چوتھائیاں ہیں۔",
          descQuarts2_ca: "Han passat 30 minuts (dos quarts), per tant, són dos quarts de tres.",
          descQuarts3: "45 منٹ (تین چوتھائیاں) گزر چکے ہیں، اور ہم تین بجے کے قریب پہنچ رہے ہیں۔",
          descQuarts3_ca: "Han passat 45 minuts (tres quarts), i estem apropant-nos a les tres.",
          section3Title: "۳. اور پانچ، اور دس...",
          section3Title_ca: "3. I Cinc, I Deu...",
          section3Intro: "ہم ابھی دیکھی گئی چوتھائیوں میں منٹ شامل کر سکتے ہیں (عام طور پر 5 کے ضرب میں)، ہمیشہ اگلے گھنٹے کا حوالہ دیتے ہوئے۔",
          section3Intro_ca: "Podem afegir minuts (normalment de 5 en 5) als quarts que acabem de veure, sempre fent referència a l'hora següent.",
          descMinuts1: "یہ 8:15 (un quart de nou) ہے اور ہم مزید پانچ منٹ شامل کرتے ہیں۔",
          descMinuts1_ca: "Són les 8 i 15 (un quart de nou) i hi afegim cinc minuts més.",
          descMinuts2: "یہ 8:30 (dos quarts de nou) ہے اور ہم دس منٹ شامل کرتے ہیں۔",
          descMinuts2_ca: "Són les 8 i 30 (dos quarts de nou) i hi afegim deu minuts.",
          descMinuts3: "یہ 8:45 (tres quarts de nou) ہے اور ہم مزید دس منٹ شامل کرتے ہیں۔",
          descMinuts3_ca: "Són les 8 i 45 (tres quarts de nou) i hi sumem deu minuts més.",
          section4Title: "۴. پہلے چند منٹ (چوتھائی تک)",
          section4Title_ca: "4. Els Primers Minuts (Fins al Quart)",
          section4Intro: "پہلی چوتھائی تک پہنچنے سے پہلے (منٹ 1 سے 14 تک)، نظام آسان ہے اور موجودہ گھنٹے کا حوالہ دیتا ہے۔",
          section4Intro_ca: "Abans d'arribar al primer quart (del minut 1 al 14), el sistema és més senzill i es refereix a l'hora actual.",
          descPrimersMinuts: "یہاں ہم صرف موجودہ گھنٹے میں منٹ شامل کرتے ہیں۔",
          descPrimersMinuts_ca: "Aquí simplement afegim els minuts a l'hora que ja és.",
          section5Title: "۵. خصوصی معاملات",
          section5Title_ca: "5. Casos Especials",
          section5Intro: "آخر میں، دوپہر اور آدھی رات کے اپنے نام ہیں۔",
          section5Intro_ca: "Finalment, el migdia i la mitjanit tenen noms propis.",
          descEspecials1: "صبح کے 12:00 بجے۔",
          descEspecials1_ca: "Les 12:00 del matí.",
          descEspecials2: "رات کے 00:00 بجے۔",
          descEspecials2_ca: "Les 00:00 de la nit.",
        }
      };
      
      // --- from services/geminiService.ts ---
      const getApiKey = () => {
        try {
          if (typeof process !== 'undefined' && process.env && process.env.API_KEY) {
            return process.env.API_KEY;
          }
        } catch (e) {
          console.warn("No s'ha pogut accedir a process.env.API_KEY en aquest entorn.");
        }
        return undefined;
      };

      const API_KEY = getApiKey();
      let ai = null;

      if (API_KEY) {
        ai = new GoogleGenAI({ apiKey: API_KEY });
      } else {
        console.warn("La clau de l'API de Gemini no està configurada. Les funcions d'IA estaran desactivades.");
      }

      const getGeminiExplanation = async (hour, minute) => {
        if (!ai) {
          return "La clau de l'API de Gemini no està configurada. No es pot obtenir una explicació.";
        }

        const timeString = timeToCatalan(hour, minute);
        const numericTime = `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`;

        const prompt = `
          Ets un professor de català amable i expert en ensenyar a dir l'hora.
          Explica de manera senzilla i clara, en català, per què l'hora ${numericTime} es diu "${timeString}".
          Enfoca't en el sistema de quarts.
          Fes una explicació breu, en un o dos paràgrafs curts.
          No utilitzis markdown, només text pla.
        `;

        try {
          const response = await ai.models.generateContent({
              model: 'gemini-2.5-flash',
              contents: prompt,
          });
          return response.text;
        } catch (error) {
          console.error("Error calling Gemini API:", error);
          return "Hi ha hagut un error en contactar amb l'assistent d'IA. Intenta-ho de nou més tard.";
        }
      };

      // --- from components/AnalogClock.tsx ---
      const AnalogClock = ({ hour, minute, size = 200 }) => {
        const hourAngle = (hour % 12) * 30 + minute * 0.5;
        const minuteAngle = minute * 6;

        const center = size / 2;
        const hourHandLength = size * 0.25;
        const minuteHandLength = size * 0.4;
        const clockFaceRadius = size * 0.45;

        return (
          <div className="flex justify-center items-center">
            <svg width={size} height={size} viewBox={`0 0 ${size} ${size}`}>
              <circle cx={center} cy={center} r={clockFaceRadius} fill="white" stroke="#334155" strokeWidth="4" />
              {Array.from({ length: 12 }).map((_, i) => {
                const angle = i * 30 * (Math.PI / 180);
                const isHourMarker = i % 3 === 0;
                const markerLength = isHourMarker ? 10 : 5;
                const x1 = center + Math.sin(angle) * (clockFaceRadius - markerLength);
                const y1 = center - Math.cos(angle) * (clockFaceRadius - markerLength);
                const x2 = center + Math.sin(angle) * clockFaceRadius;
                const y2 = center - Math.cos(angle) * clockFaceRadius;
                return <line key={i} x1={x1} y1={y1} x2={x2} y2={y2} stroke="#334155" strokeWidth={isHourMarker ? 3 : 2} />;
              })}
              <line
                x1={center}
                y1={center}
                x2={center}
                y2={center - hourHandLength}
                stroke="#334155"
                strokeWidth="6"
                strokeLinecap="round"
                transform={`rotate(${hourAngle} ${center} ${center})`}
              />
              <line
                x1={center}
                y1={center}
                x2={center}
                y2={center - minuteHandLength}
                stroke="#475569"
                strokeWidth="4"
                strokeLinecap="round"
                transform={`rotate(${minuteAngle} ${center} ${center})`}
              />
              <circle cx={center} cy={center} r="5" fill="#1e293b" />
            </svg>
          </div>
        );
      };

      // --- from hooks/useTimeGenerator.ts ---
      const getRandomMinute = () => {
        const options = [0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55];
        return options[Math.floor(Math.random() * options.length)];
      };

      const generateIncorrectOptions = (correctTime) => {
          const options = [];
          const { hour, minute } = correctTime;
          
          options.push(timeToCatalan((hour + 1) % 24, minute));
          options.push(timeToCatalan(hour, 60 - minute === 60 ? 0 : 60-minute));

          if (minute === 15) {
              options.push(timeToCatalan(hour, 45));
          } else if (minute === 30) {
              options.push(timeToCatalan(hour, 0));
          } else {
              options.push(timeToCatalan((hour + 2) % 24, minute));
          }

          return [...new Set(options)];
      };

      const generateIncorrectTimeOptions = (correctTime) => {
          const options = new Set();
          const { hour, minute } = correctTime;

          while (options.size < 3) {
              const randomHour = Math.floor(Math.random() * 24);
              const randomMinute = getRandomMinute();
              const candidateTime = { hour: randomHour, minute: randomMinute };

              if (candidateTime.hour !== hour || candidateTime.minute !== minute) {
                  options.add(JSON.stringify(candidateTime));
              }
          }
          
          return Array.from(options).map(s => JSON.parse(s));
      };


      const useTimeGenerator = () => {
        const [question, setQuestion] = useState(null);

        const generateNewQuestion = useCallback((level) => {
          const hour = Math.floor(Math.random() * 24);
          const minute = getRandomMinute();
          const correctAnswer = timeToCatalan(hour, minute);
          
          let type;
          let options;
          let timeOptions;

          if (level === 'easy') {
            type = Math.random() > 0.5 ? ExerciseType.MultipleChoice : ExerciseType.TextToClock;
            
            if (type === ExerciseType.MultipleChoice) {
                const incorrect = generateIncorrectOptions({hour, minute});
                const allOptions = [correctAnswer, ...incorrect].slice(0, 4);
                options = allOptions.sort(() => Math.random() - 0.5);
            } else { // TextToClock
                const incorrectTimes = generateIncorrectTimeOptions({hour, minute});
                const allTimeOptions = [{hour, minute}, ...incorrectTimes].slice(0, 4);
                timeOptions = allTimeOptions.sort(() => Math.random() - 0.5);
            }

          } else { // advanced
            type = ExerciseType.ClockToText;
          }

          setQuestion({
            id: `${Date.now()}-${hour}-${minute}`,
            hour,
            minute,
            type,
            correctAnswer,
            options,
            timeOptions,
          });
        }, []);

        return { question, generateNewQuestion };
      };
      
      // --- from components/Header.tsx ---
      const Header = ({ currentView, setCurrentView }) => {
        const navItemClasses = "px-4 py-2 rounded-md transition-colors duration-300 cursor-pointer text-lg font-semibold";
        const activeClasses = "bg-sky-600 text-white shadow-md";
        const inactiveClasses = "text-slate-600 hover:bg-sky-200";

        return (
          <header className="bg-white shadow-lg">
            <div className="container mx-auto px-4 py-4 flex justify-between items-center">
              <div className="flex items-center space-x-2">
                <svg xmlns="http://www.w3.org/2000/svg" className="h-8 w-8 text-sky-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}>
                  <path strokeLinecap="round" strokeLinejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <h1 className="text-2xl font-bold text-slate-800">Rellotge Català</h1>
              </div>
              <nav className="flex space-x-2 bg-slate-200 p-1 rounded-lg">
                <div
                  onClick={() => setCurrentView(View.Explain)}
                  className={`${navItemClasses} ${currentView === View.Explain ? activeClasses : inactiveClasses}`}
                >
                  Dir l'hora
                </div>
                <div
                  onClick={() => setCurrentView(View.Learn)}
                  className={`${navItemClasses} ${currentView === View.Learn ? activeClasses : inactiveClasses}`}
                >
                  Aprèn
                </div>
                <div
                  onClick={() => setCurrentView(View.Practice)}
                  className={`${navItemClasses} ${currentView === View.Practice ? activeClasses : inactiveClasses}`}
                >
                  Practica
                </div>
              </nav>
            </div>
          </header>
        );
      };
      
      // --- from components/ExplainView.tsx ---
      const ExampleRow = ({ hour, minute, text, description, translatedDescription }) => (
        <div className="grid grid-cols-1 md:grid-cols-3 items-center gap-4 md:gap-8 py-4 border-b border-slate-200 last:border-b-0">
          <div className="flex flex-col items-center">
            <AnalogClock hour={hour} minute={minute} size={120} />
            <div className="mt-2 font-mono text-xl text-slate-600 bg-slate-100 px-2 py-1 rounded">
              {formatTwoDigits(hour)}:{formatTwoDigits(minute)}
            </div>
          </div>
          <div className="md:col-span-2">
            <p className="text-xl md:text-2xl font-bold text-sky-800 mb-2">{text}</p>
            <p className="text-slate-600">{description}</p>
            <p className="text-slate-500 italic mt-1">{translatedDescription}</p>
          </div>
        </div>
      );

      const ExplainView = () => {
        const [selectedLanguage, setSelectedLanguage] = useState('es');
        const t = translations[selectedLanguage];
        const availableLanguages = {
          hy: 'Armeni', es: 'Castellà', en: 'Anglès', fr: 'Francès', ka: 'Georgià', hi: 'Hindi', ne: 'Nepalí', ru: 'Rus', uk: 'Ucraïnès', ur: 'Urdú', zh: 'Xinès',
        };

        return (
          <div className="bg-white p-6 md:p-8 rounded-xl shadow-lg animate-fade-in">
            <h2 className="text-3xl font-bold text-sky-700 mb-2">{t.mainTitle_ca}</h2>
            <p className="text-slate-500 italic mb-4">{t.mainTitle}</p>
            
            <div className="mb-8">
              <label htmlFor="language-select" className="block text-sm font-medium text-slate-700 mb-1">
                {t.selectLanguage_ca}
              </label>
              <select
                id="language-select"
                value={selectedLanguage}
                onChange={(e) => setSelectedLanguage(e.target.value)}
                className="bg-white border border-slate-300 text-slate-900 text-sm rounded-lg focus:ring-sky-500 focus:border-sky-500 block w-full md:w-1/3 p-2.5"
              >
                {Object.entries(availableLanguages).sort(([, a], [, b]) => a.localeCompare(b)).map(([key, name]) => (
                  <option key={key} value={key}>{name}</option>
                ))}
              </select>
            </div>

            <p className="text-slate-600 mb-6">
              {t.intro_ca}
              <span className="block text-slate-500 italic mt-1">{t.intro}</span>
            </p>

            <section className="mb-8">
              <h3 className="text-2xl font-bold text-slate-800 mb-4 pb-2 border-b-2 border-sky-200">{t.section1Title_ca}</h3>
              <p className="text-slate-500 italic -mt-4 mb-4 text-xl">{t.section1Title}</p>
              <p className="mb-4 text-slate-700">
                  {t.section1Intro_ca}
                  <span className="block text-slate-500 italic mt-1">{t.section1Intro}</span>
              </p>
              <div className="bg-slate-50 rounded-lg p-4">
                <ExampleRow 
                  hour={3} minute={0} 
                  text={<>Són les <span className="text-rose-600">tres</span> en punt.</>}
                  description={t.descEnPunt1_ca}
                  translatedDescription={t.descEnPunt1}
                />
                <ExampleRow 
                  hour={1} minute={0} 
                  text={<>És la <span className="text-rose-600">una</span> en punt.</>}
                  description={t.descEnPunt2_ca}
                  translatedDescription={t.descEnPunt2}
                />
              </div>
            </section>
            
            <section className="mb-8">
              <h3 className="text-2xl font-bold text-slate-800 mb-4 pb-2 border-b-2 border-sky-200">{t.section2Title_ca}</h3>
              <p className="text-slate-500 italic -mt-4 mb-4 text-xl">{t.section2Title}</p>
              <p className="mb-4 text-slate-700">
                  {t.section2Intro_ca}
                  <span className="block text-slate-500 italic mt-1">{t.section2Intro}</span>
              </p>
              <div className="bg-slate-50 rounded-lg p-4 space-y-4">
                <ExampleRow 
                  hour={2} minute={15} 
                  text={<>És <span className="text-indigo-600">un quart</span> de <span className="text-rose-600">tres</span>.</>}
                  description={t.descQuarts1_ca}
                  translatedDescription={t.descQuarts1}
                />
                <ExampleRow 
                  hour={2} minute={30} 
                  text={<>Són <span className="text-indigo-600">dos quarts</span> de <span className="text-rose-600">tres</span>.</>}
                  description={t.descQuarts2_ca}
                  translatedDescription={t.descQuarts2}
                />
                <ExampleRow 
                  hour={2} minute={45} 
                  text={<>Són <span className="text-indigo-600">tres quarts</span> de <span className="text-rose-600">tres</span>.</>}
                  description={t.descQuarts3_ca}
                  translatedDescription={t.descQuarts3}
                />
              </div>
            </section>
            
            <section className="mb-8">
              <h3 className="text-2xl font-bold text-slate-800 mb-4 pb-2 border-b-2 border-sky-200">{t.section3Title_ca}</h3>
              <p className="text-slate-500 italic -mt-4 mb-4 text-xl">{t.section3Title}</p>
              <p className="mb-4 text-slate-700">
                  {t.section3Intro_ca}
                  <span className="block text-slate-500 italic mt-1">{t.section3Intro}</span>
              </p>
              <div className="bg-slate-50 rounded-lg p-4 space-y-4">
                <ExampleRow 
                  hour={8} minute={20} 
                  text={<>És <span className="text-indigo-600">un quart i cinc</span> de <span className="text-rose-600">nou</span>.</>}
                  description={t.descMinuts1_ca}
                  translatedDescription={t.descMinuts1}
                />
                <ExampleRow 
                  hour={8} minute={40} 
                  text={<>Són <span className="text-indigo-600">dos quarts i deu</span> de <span className="text-rose-600">nou</span>.</>}
                  description={t.descMinuts2_ca}
                  translatedDescription={t.descMinuts2}
                />
                <ExampleRow 
                  hour={8} minute={55} 
                  text={<>Són <span className="text-indigo-600">tres quarts i deu</span> de <span className="text-rose-600">nou</span>.</>}
                  description={t.descMinuts3_ca}
                  translatedDescription={t.descMinuts3}
                />
              </div>
            </section>

            <section className="mb-8">
              <h3 className="text-2xl font-bold text-slate-800 mb-4 pb-2 border-b-2 border-sky-200">{t.section4Title_ca}</h3>
              <p className="text-slate-500 italic -mt-4 mb-4 text-xl">{t.section4Title}</p>
              <p className="mb-4 text-slate-700">
                  {t.section4Intro_ca}
                  <span className="block text-slate-500 italic mt-1">{t.section4Intro}</span>
              </p>
              <div className="bg-slate-50 rounded-lg p-4">
                <ExampleRow 
                  hour={4} minute={10} 
                  text={<>Són les <span className="text-rose-600">quatre</span> i <span className="text-indigo-600">deu</span>.</>}
                  description={t.descPrimersMinuts_ca}
                  translatedDescription={t.descPrimersMinuts}
                />
              </div>
            </section>

            <section>
              <h3 className="text-2xl font-bold text-slate-800 mb-4 pb-2 border-b-2 border-sky-200">{t.section5Title_ca}</h3>
              <p className="text-slate-500 italic -mt-4 mb-4 text-xl">{t.section5Title}</p>
              <p className="mb-4 text-slate-700">
                  {t.section5Intro_ca}
                  <span className="block text-slate-500 italic mt-1">{t.section5Intro}</span>
              </p>
              <div className="bg-slate-50 rounded-lg p-4">
                <ExampleRow 
                  hour={12} minute={0} 
                  text={<>És <span className="text-amber-600">migdia</span>.</>}
                  description={t.descEspecials1_ca}
                  translatedDescription={t.descEspecials1}
                />
                <ExampleRow 
                  hour={0} minute={0} 
                  text={<>És <span className="text-purple-700">mitjanit</span>.</>}
                  description={t.descEspecials2_ca}
                  translatedDescription={t.descEspecials2}
                />
              </div>
            </section>
          </div>
        );
      };

      // --- from components/LearnView.tsx ---
      const LearnView = () => {
        const [date, setDate] = useState(new Date());

        const hour = date.getHours();
        const minute = date.getMinutes();

        useEffect(() => {
          const timerId = setInterval(() => setDate(new Date()), 1000);
          return () => clearInterval(timerId);
        }, []);

        const handleHourChange = (e) => {
          const newDate = new Date(date);
          newDate.setHours(parseInt(e.target.value, 10));
          setDate(newDate);
        };
        
        const handleMinuteChange = (e) => {
          const newDate = new Date(date);
          newDate.setMinutes(parseInt(e.target.value, 10));
          setDate(newDate);
        };

        return (
          <div className="bg-white p-6 md:p-8 rounded-xl shadow-lg animate-fade-in">
            <h2 className="text-3xl font-bold text-sky-700 mb-2">Aprèn les Hores</h2>
            <p className="text-slate-600 mb-6">Mou els controls per veure com es diu l'hora en català.</p>
            <div className="grid md:grid-cols-2 gap-8 items-center">
              <div className="flex flex-col items-center p-6 bg-slate-50 rounded-lg">
                <AnalogClock hour={hour} minute={minute} size={250} />
                <div className="mt-6 text-4xl font-bold text-slate-700 tracking-wider">
                  {formatTwoDigits(hour)}:{formatTwoDigits(minute)}
                </div>
              </div>
              <div className="space-y-6">
                <div className="text-center p-6 bg-sky-100 border-l-4 border-sky-500 rounded-r-lg">
                  <p className="text-2xl md:text-3xl font-bold text-sky-800">
                    {timeToCatalan(hour, minute)}
                  </p>
                </div>
                <div className="space-y-4">
                  <div>
                    <label htmlFor="hour" className="block text-sm font-medium text-slate-700 mb-1">Hora: {formatTwoDigits(hour)}</label>
                    <input 
                      id="hour" 
                      type="range" 
                      min="0" 
                      max="23" 
                      value={hour}
                      onChange={handleHourChange}
                      className="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-sky-600"
                    />
                  </div>
                  <div>
                    <label htmlFor="minute" className="block text-sm font-medium text-slate-700 mb-1">Minut: {formatTwoDigits(minute)}</label>
                    <input 
                      id="minute" 
                      type="range" 
                      min="0" 
                      max="59" 
                      value={minute}
                      onChange={handleMinuteChange}
                      className="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-sky-600"
                    />
                  </div>
                </div>
              </div>
            </div>
          </div>
        );
      };

      // --- from components/PracticeView.tsx ---
      const PracticeView = () => {
        const { question, generateNewQuestion } = useTimeGenerator();
        const [level, setLevel] = useState('easy');
        const [userAnswer, setUserAnswer] = useState('');
        const [feedback, setFeedback] = useState(null);
        const [score, setScore] = useState(0);
        const [total, setTotal] = useState(0);
        const [geminiExplanation, setGeminiExplanation] = useState('');
        const [isExplanationLoading, setIsExplanationLoading] = useState(false);

        useEffect(() => {
          generateNewQuestion(level);
          setScore(0);
          setTotal(0);
          setFeedback(null);
          setUserAnswer('');
          setGeminiExplanation('');
        }, [level, generateNewQuestion]);

        const handleCheckAnswer = () => {
          if (!question || userAnswer === '') return;

          const normalize = (str) => str.toLowerCase().replace(/[. ]/g, '');
          const isCorrect = normalize(userAnswer) === normalize(question.correctAnswer);

          if (isCorrect) {
            setFeedback('correct');
            setScore(s => s + 1);
          } else {
            setFeedback('incorrect');
          }
          setTotal(t => t + 1);
          setGeminiExplanation('');
        };
        
        const handleNextQuestion = () => {
          generateNewQuestion(level);
          setFeedback(null);
          setUserAnswer('');
          setGeminiExplanation('');
        };

        const handleOptionClick = (option) => {
          if (feedback) return;
          setUserAnswer(option);
        };
        
        const handleTimeOptionClick = (time) => {
          if (feedback) return;
          const answerText = timeToCatalan(time.hour, time.minute);
          setUserAnswer(answerText);
        };

        useEffect(() => {
          if (userAnswer && (question?.type === ExerciseType.MultipleChoice || question?.type === ExerciseType.TextToClock)) {
            handleCheckAnswer();
          }
        }, [userAnswer, question]);

        const fetchExplanation = async () => {
            if (!question) return;
            setIsExplanationLoading(true);
            setGeminiExplanation('');
            const explanation = await getGeminiExplanation(question.hour, question.minute);
            setGeminiExplanation(explanation);
            setIsExplanationLoading(false);
        };

        if (!question) {
          return <div>Carregant exercici...</div>;
        }

        const feedbackClasses = {
          correct: 'bg-emerald-100 border-emerald-500 text-emerald-800',
          incorrect: 'bg-rose-100 border-rose-500 text-rose-800',
          waiting: 'bg-sky-100 border-sky-500 text-sky-800'
        };

        const levelButtonClasses = "px-6 py-2 rounded-full font-semibold transition-all duration-300 w-full";
        const activeLevelClasses = "bg-sky-600 text-white shadow-md";
        const inactiveLevelClasses = "bg-slate-200 text-slate-700 hover:bg-sky-200";

        return (
          <div className="bg-white p-6 md:p-8 rounded-xl shadow-lg animate-fade-in max-w-3xl mx-auto">
            <div className="flex flex-col sm:flex-row justify-between sm:items-center mb-4 gap-4">
              <h2 className="text-3xl font-bold text-sky-700">Practica</h2>
              <div className="text-lg font-bold text-slate-600 bg-slate-200 px-4 py-1 rounded-full self-start">
                Punts: <span className="text-sky-700">{score} / {total}</span>
              </div>
            </div>
            
            <div className="grid grid-cols-2 items-center gap-2 mb-6 p-1 bg-slate-100 rounded-full">
              <button
                onClick={() => setLevel('easy')}
                className={`${levelButtonClasses} ${level === 'easy' ? activeLevelClasses : inactiveLevelClasses}`}
              >
                Nivell Fàcil
              </button>
              <button
                onClick={() => setLevel('advanced')}
                className={`${levelButtonClasses} ${level === 'advanced' ? activeLevelClasses : inactiveLevelClasses}`}
              >
                Nivell Avançat
              </button>
            </div>
            
            <div className="text-center p-8 bg-slate-50 rounded-lg min-h-[264px] flex items-center justify-center">
              {question.type === ExerciseType.TextToClock ? (
                <div>
                  <p className="text-slate-600 font-semibold mb-2">Com es representa aquesta hora?</p>
                  <p className="text-2xl md:text-3xl font-bold text-sky-800">{question.correctAnswer}</p>
                </div>
              ) : (
                <AnalogClock hour={question.hour} minute={question.minute} size={200} />
              )}
            </div>

            <div className="mt-6">
              {question.type !== ExerciseType.TextToClock && (
                <p className="text-center text-slate-600 font-semibold mb-4">Quina hora és?</p>
              )}
              
              {question.type === ExerciseType.ClockToText && (
                <form onSubmit={(e) => { e.preventDefault(); handleCheckAnswer(); }}>
                  <div className="flex flex-col sm:flex-row gap-2">
                    <input
                      type="text"
                      value={userAnswer}
                      onChange={(e) => setUserAnswer(e.target.value)}
                      disabled={feedback !== null}
                      placeholder="Escriu l'hora aquí..."
                      className="flex-grow p-3 border-2 border-slate-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition"
                    />
                    <button
                      type="submit"
                      disabled={feedback !== null || userAnswer === ''}
                      className="px-6 py-3 bg-sky-600 text-white font-bold rounded-lg hover:bg-sky-700 transition shadow disabled:bg-slate-400 disabled:cursor-not-allowed"
                    >
                      Comprova
                    </button>
                  </div>
                </form>
              )}

              {question.type === ExerciseType.MultipleChoice && (
                <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                  {question.options?.map((opt, i) => (
                    <button
                      key={i}
                      onClick={() => handleOptionClick(opt)}
                      disabled={feedback !== null}
                      className={`p-4 border-2 rounded-lg text-left transition font-semibold
                        ${feedback === null ? 'border-slate-300 hover:bg-sky-100 hover:border-sky-400' : 'cursor-not-allowed'}
                        ${feedback !== null && opt === question.correctAnswer ? 'bg-emerald-100 border-emerald-500' : ''}
                        ${feedback !== null && userAnswer === opt && opt !== question.correctAnswer ? 'bg-rose-100 border-rose-500' : ''}
                        ${feedback !== null && userAnswer !== opt && opt !== question.correctAnswer ? 'opacity-50' : ''}
                      `}
                    >
                      {opt}
                    </button>
                  ))}
                </div>
              )}

              {question.type === ExerciseType.TextToClock && question.timeOptions && (
                <div className="grid grid-cols-2 gap-4">
                  {question.timeOptions.map((timeOpt, i) => {
                    const optionText = timeToCatalan(timeOpt.hour, timeOpt.minute);
                    return (
                      <button
                        key={i}
                        onClick={() => handleTimeOptionClick(timeOpt)}
                        disabled={feedback !== null}
                        className={`p-2 border-2 rounded-lg transition flex justify-center items-center
                          ${feedback === null ? 'border-slate-300 hover:bg-sky-100 hover:border-sky-400' : 'cursor-not-allowed'}
                          ${feedback !== null && optionText === question.correctAnswer ? 'bg-emerald-100 border-emerald-500' : ''}
                          ${feedback !== null && userAnswer === optionText && optionText !== question.correctAnswer ? 'bg-rose-100 border-rose-500' : ''}
                          ${feedback !== null && userAnswer !== optionText && optionText !== question.correctAnswer ? 'opacity-50' : ''}
                        `}
                      >
                        <AnalogClock hour={timeOpt.hour} minute={timeOpt.minute} size={120} />
                      </button>
                    );
                  })}
                </div>
              )}
            </div>

            {feedback && (
              <div className={`mt-4 p-4 border-l-4 rounded-r-lg ${feedbackClasses[feedback]}`}>
                <div className="flex justify-between items-start gap-4">
                  <div>
                    <p className="font-bold">
                      {feedback === 'correct' ? 'Correcte!' : 'Incorrecte!'}
                    </p>
                    {feedback === 'incorrect' && <p>La resposta correcta és: <strong>{question.correctAnswer}</strong></p>}
                    
                    {geminiExplanation && (
                      <div className="mt-2 pt-2 border-t border-slate-300/50 text-sm">
                        <p className="font-bold mb-1">Explicació de l'IA:</p>
                        <p>{geminiExplanation}</p>
                      </div>
                    )}
                    {isExplanationLoading && (
                      <div className="mt-2 pt-2 text-sm italic text-slate-600">L'assistent d'IA està pensant...</div>
                    )}
                  </div>
                  <div className="flex flex-col items-end space-y-2 ml-2 flex-shrink-0">
                      <button 
                        onClick={handleNextQuestion}
                        className="px-6 py-2 bg-slate-700 text-white font-semibold rounded-lg hover:bg-slate-800 transition shadow"
                      >
                        Següent
                      </button>
                      {feedback === 'incorrect' && !geminiExplanation && !isExplanationLoading && (
                        <button onClick={fetchExplanation} className="text-sm text-sky-700 hover:underline font-semibold whitespace-nowrap">
                          Explica-m'ho
                        </button>
                      )}
                  </div>
                </div>
              </div>
            )}
          </div>
        );
      };

      // --- from App.tsx ---
      const App = () => {
        const [currentView, setCurrentView] = useState(View.Explain);

        return (
          <div className="bg-slate-100 min-h-screen text-slate-800">
            <Header currentView={currentView} setCurrentView={setCurrentView} />
            <main className="container mx-auto p-4 md:p-8">
              {currentView === View.Explain && <ExplainView />}
              {currentView === View.Learn && <LearnView />}
              {currentView === View.Practice && <PracticeView />}
            </main>
            <footer className="text-center p-4 text-slate-500 text-sm">
              <p>Creat amb ♥ per a l'aprenentatge del català.</p>
              <p className="mt-1">
                © Luis Romance / <a href="https://www.cfalapau.cat" target="_blank" rel="noopener noreferrer" className="underline hover:text-sky-600">CFA La Pau</a>
              </p>
            </footer>
          </div>
        );
      };

      // --- RENDER LOGIC ---
      const rootElement = document.getElementById('root');
      if (!rootElement) {
        throw new Error("Could not find root element to mount to");
      }

      const root = ReactDOM.createRoot(rootElement);
      root.render(
        <React.StrictMode>
          <App />
        </React.StrictMode>
      );

      // ===== FI DEL CODI CONSOLIDAT =====
    </script>
  </body>
</html>
